/*! ronin 2014-05-10 */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("Requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a){"use strict";var b,c,d,e,f,g,h,i,j;b={name:"Miso",version:"0.3.2"},i={}.toString,g={validator:function(){}},h={types:{}},f=function(a,b){return null==a?!1:Object.prototype.hasOwnProperty.call(a,b)},e=function(a){var c,d,e;d="__"+b.name.toLowerCase()+"__",e=!0;try{Object.defineProperty(a,d,{__proto__:null,value:e})}catch(f){c=f,a[d]=e}return!0},d=function(a,b,e){var f;return f=h.methods,f.isArray(b)||f.isPlainObject(b)&&!f.isArray(b.handlers)?f.each(b,function(a){return d(null!=a?a.handlers:void 0,a,e)}):f.isPlainObject(b)&&f.isArray(b.handlers)&&f.each(a,function(a){return c(a,b,e)}),e},c=function(a,b,c){var d,e,i,j,k,l,m,n,o;if(j=a.name,i=h.methods,!i.isFunction(c[j])){for(d=a.handler,m=f(a,"value")?a.value:b.value,l=[a.validator,b.validator,g.validator,function(){return!0}],n=0,o=l.length;o>n&&(k=l[n],!i.isFunction(k));n++);e=function(){return i.isFunction(d)&&k.apply(c,arguments)===!0?d.apply(c,arguments):m},c[j]=e}return c},h.methods={mixin:function(){var a,b,c,d,e,f,g,h;for(a=arguments,d=a.length,g=null!=(h=a[0])?h:{},c=1,1===d&&(g=this,c--);d>c;){if(f=a[c],"object"==typeof f)for(e in f)b=f[e],b!==g&&void 0!==b&&(g[e]=b);c++}return g},each:function(a,b){var c,d,e,f,g;if(f=this.type(a),"object"===f||"function"===f){for(e in a)if(g=a[e],b.apply(g,[g,e,a])===!1)break}else if("array"===f||"string"===f)for(d=0;d<a.length&&(c="array"===f?a[d]:a.charAt(d),b.apply(a[d],[c,d++,a])!==!1););return a},type:function(a){return null==a?String(a):h.types[i.call(a)]||"object"},slice:function(a,b){return null==a?[]:[].slice.call(a,Number(b)||0)},hasProp:function(){return f.apply(this,this.slice(arguments))},isWindow:function(a){return a&&this.isObject(a)&&"setInterval"in a},isElement:function(a){return a&&this.isObject(a)&&1===a.nodeType},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isInteger:function(a){return this.isNumeric(a)&&/^-?[1-9]\d*$/.test(a)},isPlainObject:function(a){var b,c;if(!a||!this.isObject(a)||a.nodeType||this.isWindow(a))return!1;try{if(a.constructor&&!this.hasProp(a,"constructor")&&!this.hasProp(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return b=d,!1}for(c in a);return void 0===c||this.hasProp(a,c)},isEmpty:function(a){var b,c;if(c=!1,null!=a&&a){if(this.isObject(a)){c=!0;for(b in a){c=!1;break}}}else c=!0;return c},isArrayLike:function(a){var b,c,d;return c=!1,this.isObject(a)&&null!==a&&(this.isWindow(a)||(d=this.type(a),b=a.length,(1===a.nodeType&&b||this.isArray(d)||!this.isFunction(d)&&(0===b||this.isNumber(b)&&b>0&&b-1 in a))&&(c=!0))),c}},h.methods.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a){var b;return h.types["[object "+a+"]"]=b=a.toLowerCase(),h.methods["is"+a]=function(a){return this.type(a)===b}}),j=function(a,b){return d(null!=a?a.handlers:void 0,a,null!=b?b:{})},h.methods.each(h.methods,function(a,b){return e(a),j[b]=a}),a[b.name]=j}),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("Requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;c={name:"Ronin",version:"0.2.3"},t={}.toString,d=/^[0-9A-Z_.]+[^_.]?$/i,r={regexps:{date:{iso8601:/^(\d{4})\-(\d{2})\-(\d{2})(?:T(\d{2})\:(\d{2})\:(\d{2})(?:\.)(\d{3})?(Z|[+-]\d{2}\:\d{2})?)?$/}},modules:{Core:{}}},r.modules.Core.BuiltIn={handlers:function(){var a;a=[];for(p in Miso)k=Miso[p],k.__miso__===!0&&a.push({name:p,handler:k});return a}()},f=function(a,b,c,d){var e,g,h,i;return i=!1,g=this,h=g.isPlainObject(a),(h||d)&&c?i=b===a:(e=h?f.apply(g,[g.keys(a),g.keys(b),!1,!0]):b.length===a.length,e&&g.each(a,function(a,e){var h;return h=g.type(a),g.inArray(h,["string","number","boolean","null","undefined"])>-1?i=b[e]===a:g.inArray(h,["date","regexp","function"])>-1?i=c?b[e]===a:b[e].toString()===a.toString():g.inArray(h,["array","object"])>-1?i=f.apply(g,[a,b[e],c,d]):void 0})),i},r.modules.Core.Global={handlers:[{name:"alias",handler:function(b){return this.isString(b)&&void 0===a[b]&&(a[b]=this),a[String(b)]}},{name:"mask",handler:function(b){var c,d,e;if(this.hasProp(a,b))a.console&&console.error("'"+b+"' has existed as a property of Window object.");else{d=this.__meta__.name,a[b]=a[d];try{e=delete a[d]}catch(f){c=f,a[d]=void 0,e=!0}this.__meta__.name=b}return e},value:!1,validator:function(a){return this.isString(a)}},{name:"namespace",handler:function(){var b,c,d,e;return b=arguments,d=this,e={},c=b[0],d.isPlainObject(c)||(c=b[b.length-1]===!0?a:this),d.each(b,function(a){var b;return d.isString(a)&&/^[0-9A-Z_.]+[^_.]$/i.test(a)&&(b=c,d.each(a.split("."),function(a,c,d){return void 0===b[a]&&(b[a]=c===d.length-1?null:{}),b=b[a],!0}),e=b),!0}),e}},{name:"equal",handler:function(a,b,c){var d,e,g,h,i;return h=!1,e=this,i=e.type(a),e.type(b)===i&&(g=e.isPlainObject(a),(g&&e.isPlainObject(b)||"object"!==i)&&(d=e.isArray(a),g||d||(a=[a],b=[b]),e.isBoolean(c)||(c=!1),h=f.apply(e,[a,b,c,d]))),h}},{name:"random",handler:function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))}}]},r.modules.Core.Object={handlers:[{name:"keys",handler:function(a,b){var c;return c=[],this.each(a,function(a,d){return a===b?(c=d,!1):c.push(d)}),this.isArray(c)?c.sort():c},validator:function(a){var b;return!(null===a||a instanceof Array||"object"!=(b=typeof a)&&"function"!==b)},value:[]}]},n=function(a){return a instanceof Array},o=function(a){return this.isArray(a)||this.isPlainObject(a)},l=function(a,b,c,d,e){var f,g;if(g={value:a,computed:a},o.call(this,c)){if(f=this.isFunction(d),!f&&this.isArray(c)&&c[0]===+c[0]&&c.length<65535)return Math[b].apply(Math,c);this.each(c,function(a,c,h){var i;return i=f?d.apply(e,[a,c,h]):a,"max"===b&&i>g.computed||"min"===b&&i<g.computed?g={value:a,computed:i}:void 0})}return g.value},i=function(a){var b,c;return c=this,b=[],c.isArray(a)?c.each(a,function(a){return b=b.concat(i.call(c,a))}):b=a,b},j=function(a){var b;return b=/^([-+]?\d+)\.(\d+)$/,(b.test(a)?(a+"").match(b)[2]:"").length},q=function(a,b,c,d){var e;for(e=[];b>=a;)e.push(d?d(a):a),a+=c;return e},h=function(b,c,d,e,f){var g,h,i,j,k;return j=null,h=this,h.isFunction(c)&&(g="array"===(k=h.type(b))||"string"===k,null==d&&(d=a),h.isFunction(e)&&g?j=e.apply(b,[c,d]):(i=h.isPlainObject(b),i?j={}:g&&(j=[]),null!==j&&h.each(b,function(a,e){var k;return k=c.apply(d,[a,e,h.isString(b)?new String(b):b]),f(j,k,a,e,i,g),!0})),h.isString(b)&&(j=j.join(""))),j},r.modules.Core.Array={value:[],validator:function(a){return n(a)},handlers:[{name:"inArray",handler:function(a,b,c){var d,e,f;if(d=-1,e=Array.prototype.indexOf,f=b.length,c=c?0>c?Math.max(0,f+c):c:0,e)d=e.apply(b,[a,c]);else for(;f>c;){if(c in b&&b[c]===a){d=c;break}c++}return d},validator:function(a,b){return n(b)},value:-1},{name:"filter",handler:function(a,b,c){return h.apply(this,[a,b,c,[].filter,function(a,b,c,d,e,f){if(b){if(e)return a[d]=c;if(f)return a.push(c)}}])},validator:function(a){var b;return n(a)||"object"==(b=typeof a)||"string"===b},value:null},{name:"map",handler:function(a,b,c){return h.apply(this,[a,b,c,[].map,function(a,b,c,d){return a[d]=b}])},validator:function(a){var b;return n(a)||"object"==(b=typeof a)||"string"===b},value:null},{name:"product",handler:function(a){var b,c,d;return d=1,b=0,c=this,c.each(a,function(a){return c.isNumeric(a)?(b++,d*=a):void 0}),0===b?0:d},value:null},{name:"unique",handler:function(a,b){var c,d;return d=[],c=this,b=!!b,c.each(b?a.reverse():a,function(a){return c.isNumeric(a)&&(a=parseFloat(a)),-1===c.inArray(a,d)?d.push(a):void 0}),b&&(a.reverse(),d.reverse()),d},value:null},{name:"range",handler:function(a,b,c){var d,e,f,g,h,i,k,l,m;return m=[],i=this,c=i.isNumeric(c)&&1*c>0?1*c:1,i.isNumeric(a)&&i.isNumeric(b)?(f=j(a),h=j(b),g=j(c),e=Math.max(f,h,g),e>0?(e=1*i.zerofill(1,e+1),c*=e,d=function(a){return a/e}):e=1,a*=e,b*=e):(k=/^[a-z]$/,l=/^[A-Z]$/,a+="",b+="",(k.test(a)&&k.test(b)||l.test(a)&&l.test(b))&&(a=a.charCodeAt(0),b=b.charCodeAt(0),d=function(a){return String.fromCharCode(a)})),i.isNumber(a)&&i.isNumber(b)&&(m=a>b?q(b,a,c,d).reverse():b>a?q(a,b,c,d):[d?d(a):a]),m},validator:function(){return!0}},{name:"reduce",handler:function(b,c,d,e){var f,g,h,i,j,k,l;if(j=this,e=!!e,j.isArray(b))if(f=arguments,k=e?[].reduceRight:[].reduce,g=f.length>2,k)l=k.apply(b,g?[c,d]:[c]);else if(h=0,i=b.length,g||(d=b[0],h=1,i--),j.isFunction(c)){for(i=g?i:i+1;i>h;)d=c.apply(a,[d,b[h],h,b]),h++;l=d}return l},value:null},{name:"flatten",handler:function(a){return i.call(this,a)}},{name:"shuffle",handler:function(a){var b,c,d,e;return c=this,e=[],b=0,d=void 0,c.each(a,function(a){return d=c.random(b++),e[b-1]=e[d],e[d]=a,!0}),e},value:null},{name:"sum",handler:function(a){var b;return b=0/0,o.call(this,a)&&(b=0,this.each(a,function(a){return b+=1*a})),b},validator:function(){return!0},value:0/0},{name:"max",handler:function(b,c,d){return l.apply(this,[-1/0,"max",b,c,arguments.length<3?a:d])},validator:function(){return!0}},{name:"min",handler:function(b,c,d){return l.apply(this,[1/0,"min",b,c,arguments.length<3?a:d])},validator:function(){return!0}}]},m=function(a,b,c){var d,e,f;for(e=this,d=e.isRegExp(c)?c:new RegExp(c,"ig"),d.global||(d=new RegExp(d.source,"ig")),f=d.exec(a);f;)f.index<b&&(b+=f[0].length),f.lastIndex=0;return a.substring(0,b)},u=function(a){var b,c,d;return c=this,d=[],c.isString(a)&&(d=function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],f.push("\\u"+c.pad(Number(b.charCodeAt(0)).toString(16),4,"0").toUpperCase());return f}()),d.join("")},v=function(b){var c,d,e;return e=b,d=a.btoa,c=a.atob,this.isString(b)&&this.isFunction(d)&&(e=d(unescape(encodeURIComponent(b)))),e},r.modules.Core.String={value:"",validator:function(a){return this.isString(a)},handlers:[{name:"pad",handler:function(a,b,c){var d,e,f;if((this.isString(c)===!1||1!==c.length)&&(c=" "),this.isInteger(b)||(b=0),a=String(a),d=1,f=String(c),e=Math.abs(b)-a.length,e>0){for(;e>d;)c+=f,d++;a=b>0?a+c:c+a}return a},validator:function(a){var b;return"string"==(b=typeof a)||"number"===b}},{name:"capitalize",handler:function(a,b){var c;return c="[a-z]+",a.replace(b===!0?new RegExp(c,"ig"):new RegExp(c),function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()})}},{name:"camelCase",handler:function(a,b){var c;return a=a.toLowerCase().replace(/[-_\x20]([a-z]|[0-9])/gi,function(a,b){return b.toUpperCase()}),c=a.charAt(0),a=(b===!0?c.toUpperCase():c.toLowerCase())+a.slice(1)}},{name:"zerofill",handler:function(a,b){var c,d,e,f,g;return f="",d=this,g=/^([-+]?\d+)\.(\d+)$/,c=g.test(a),e="",b=parseInt(b),b>0&&c?(a=(a+"").match(g),e=""+1*a[1]+".",a=a[2]):0>1*a&&(e="-",a=(a+"").substring(1)),f=d.pad(a,b,"0"),f=0>b&&c?"":e+f},validator:function(a,b){return this.isNumeric(a)&&this.isNumeric(b)&&/^-?[1-9]\d*$/.test(b)}},{name:"trim",handler:function(a){var b;return b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,k="".trim,k&&!k.call("﻿ ")?k.call(a):a.replace(b,"")}},{name:"substr",handler:function(a,b,c,d){var e,f;return e=arguments,f=this,3===e.length&&f.isNumeric(b)&&b>0&&(f.isString(c)||f.isRegExp(c))?a=m.apply(f,[a,b,c]):f.isNumeric(b)&&b>=0&&((!f.isNumeric(c)||0>=c)&&(c=a.length),a=f.isString(d)||f.isRegExp(d)?m.apply(f,[a.substring(b),c,d]):a.substring(b,c)),a}},{name:"countChars",handler:function(a,b){var c,d,e,f;switch(f=null,e=this,(!e.isInteger(b)||0>b)&&(b=0),c={},d=[],e.each(a,function(a){var b;return b=a.charCodeAt(0),e.isNumber(c[b])?c[b]++:(c[b]=1,e.inArray(a,d)<0?d.push(a):void 0)}),b){case 0:break;case 1:f=c;break;case 2:break;case 3:f=d.join("");break;case 4:}return f},value:null}]},b=function(a){var b,c;return a.shift(),b=e.call(this,a),c=s(a.slice(-1)[0]),0!==c&&b.setTime(b.getTime()-c),b},e=function(a){var b,c;return c=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],b=new Date,this.each(a,function(a,d){var e;return null!=a&&""!==a&&(e=c[d],null!=e)?b["setUTC"+e](1*a+("Month"===e?-1:0)):void 0}),b},s=function(a){var b,c;return c=0,/^(Z|[+-]\d{2}\:\d{2})$/.test(a)&&(b=a.charAt(0),"Z"!==b&&(c=a.substring(1).split(":"),c=60*(b+(60*c[0]+1*c[1]))*1e3)),c},r.modules.Core.Date={handlers:[{name:"date",handler:function(a){var c,d,e;return e=null,this.isDate(a)?c=a:this.isString(a)&&(a=this.trim(a),c=new Date(a),d=String(a).match(r.regexps.date.iso8601),isNaN(c.getTime())&&(c=null!=d?b.call(this,d):new Date)),c},value:new Date},{name:"now",handler:function(a){var b;return b=new Date,a===!0?b:b.getTime()}}]},w=Miso(r.modules.Core);try{Object.defineProperty(w,"__meta__",{__proto__:null,writable:!0,value:c})}catch(x){g=x,w.mixin({__meta__:c})}a[c.name]=w});